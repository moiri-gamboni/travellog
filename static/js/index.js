// Generated by CoffeeScript 1.6.3
(function() {
  var move;

  window.loadingDone = false;

  move = function(direction) {
    var launchIn, mainOut, prepare, screenHeight, screenWidth, topDistance, windowHeight, windowWidth;
    windowHeight = $(".main").height();
    windowWidth = $(".main").width();
    screenHeight = $(window).height();
    screenWidth = $(window).width();
    topDistance = parseInt($(".main").css("top"), 10);
    if (direction === "top") {
      prepare = {
        "left": "0",
        "top": -windowHeight
      };
      launchIn = {
        "y": windowHeight + topDistance + 1,
        x: 0
      };
      mainOut = {
        "y": screenHeight,
        x: 0
      };
    } else if (direction === "down") {
      prepare = {
        "left": "0",
        "top": screenHeight
      };
      launchIn = {
        "y": -(screenHeight - topDistance),
        x: 0
      };
      mainOut = {
        "y": -screenHeight,
        x: 0
      };
    } else if (direction === "left") {
      prepare = {
        "left": -screenWidth,
        "top": topDistance
      };
      launchIn = {
        "x": screenWidth,
        y: 0
      };
      mainOut = {
        "x": screenWidth,
        y: 0
      };
    } else {
      prepare = {
        "left": screenWidth,
        "top": topDistance
      };
      launchIn = {
        "x": -screenWidth,
        y: 0
      };
      mainOut = {
        "x": -screenWidth,
        y: 0
      };
    }
    $(".launch").attr({
      "style": ""
    }).css(prepare);
    return setTimeout(function() {
      $(".launch").transition(launchIn, 800);
      $(".main").transition(mainOut, 800);
      return setTimeout(function() {
        $(".log-details").removeClass("animate").toggleClass("main launch").attr({
          "style": ""
        });
        return angular.element("html").scope().$broadcast("animation-done");
      }, 1000);
    }, 100);
  };

  $(".sidenav-top").click(function() {
    if (loadingDone) {
      return move("top");
    }
  });

  $(".sidenav-bottom").click(function() {
    if (loadingDone) {
      return move("down");
    }
  });

  $(".sidenav-right").click(function() {
    console.log(loadingDone);
    if (loadingDone) {
      return move("right");
    }
  });

  $(".sidenav-left").click(function() {
    if (loadingDone) {
      return move("left");
    }
  });

  window.changeCountry = function(newCountry) {
    $("#country").addClass("fadeout");
    return setTimeout(function() {
      return $("#country").removeClass("fadeout").html(newCountry);
    }, 500);
  };

  $("#add, #question").click(function() {
    return $("#overlay, #overlay-content").addClass("fadein");
  });

  $("#escape").click(function() {
    return $("#overlay, #overlay-content").removeClass("fadein");
  });

  $("#logo, #start-here").click(function() {
    if (window.loadingDone && (typeof miniMap !== "undefined" && miniMap !== null)) {
      $("#launch-screen, .background").addClass("hide");
      $("#container").removeClass("hide");
      angular.element('html').scope().$broadcast('map-init');
      return window.loadingDone = false;
    }
  });

  window.incrementBackground = function() {
    var counter, newCounter, passive;
    $(".background").toggleClass("active passive");
    passive = $(".passive");
    counter = passive.attr("data-counter");
    newCounter = (parseInt(counter) + 2) % 5;
    return setTimeout(function() {
      return passive.removeClass("background-" + counter).addClass("background-" + newCounter).attr("data-counter", newCounter);
    }, 2000);
  };

}).call(this);
